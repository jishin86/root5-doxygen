<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!--                                             -->
<!-- Author: ROOT team (rootdev@pcroot.cern.ch)  -->
<!--                                             -->
<!--   Date: Thu Nov  3 20:19:16 2011            -->
<!--                                             -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>TLimit</title>
<meta name="rating" content="General" />
<meta name="objecttype" content="Manual" />
<meta name="keywords" content="software development, oo, object oriented, unix, x11, windows, c++, html, rene brun, fons rademakers, cern" />
<meta name="description" content="ROOT - An Object Oriented Framework For Large Scale Data Analysis." />
<link rel="stylesheet" type="text/css" href="ROOT.css" id="ROOTstyle" />
<script type="text/javascript" src="ROOT.js"></script>
</head>
<body  onload="javascript:SetValuesFromCookie();"><div id="body_content">
<div id="root_header"><img src="http://root.cern.ch/drupal/sites/default/files/rootdrawing-logo.png" alt="ROOT logo"/></div>
<a name="TopOfPage"></a>
<script type="text/javascript">WriteFollowPageBox('class TLimit','libHist','TLimit.h');</script>
<div id="toplinks">
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Quick Links:</span>
<a class="descrheadentry" href="http://root.cern.ch">ROOT Homepage</a>
<a class="descrheadentry" href="./ClassIndex.html">Class Index</a>
<a class="descrheadentry" href="./ClassHierarchy.html">Class Hierarchy</a></div>
<script type="text/javascript">
function onSearch() {
var s='http://www.google.com/search?q=%s+site%3A%u+-site%3A%u%2Fsrc%2F+-site%3A%u%2Fexamples%2F';
var ref=String(document.location.href).replace(/https?:\/\//,'').replace(/\/[^\/]*$/,'').replace(/\//g,'%2F');
window.location.href=s.replace(/%u/ig,ref).replace(/%s/ig,escape(document.searchform.t.value));
return false;}
</script>
<form id="searchform" name="searchform" onsubmit="return onSearch()" action="javascript:onSearch();" method="post">
<input name="t" size="30" value="Search documentation..." onfocus="if (document.searchform.t.value=='Search documentation...') document.searchform.t.value='';"></input>
<a id="searchlink"  title="www.google.com"  href="javascript:onSearch();" onclick="return onSearch()">Search</a></form>
</div>
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Source:</span>
<a class="descrheadentry" href="src/TLimit.h.html">header file</a>
<a class="descrheadentry" href="src/TLimit.cxx.html">source file</a>
<a class="descrheadentry" href="http://root.cern.ch/viewcvs/trunk/hist/hist/inc/TLimit.h?view=log">viewVC header</a> <a class="descrheadentry" href="http://root.cern.ch/viewcvs/trunk/hist/hist/src/TLimit.cxx?view=log">viewVC source</a> 
</div></div>
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Sections:</span>
<a class="descrheadentry" href="#TLimit:description">class description</a> 
<a class="descrheadentry" href="#TLimit:Function_Members">function members</a>
<a class="descrheadentry" href="#TLimit:Data_Members">data members</a>
<a class="descrheadentry" href="#TLimit:Class_Charts">class charts</a>
</div></div>
</div>
<div class="location">
<a class="locationlevel" href="index.html">ROOT</a>
 &#187; <a class="locationlevel" href="./HIST_Index.html">HIST</a>
 &#187; <a class="locationlevel" href="./HIST_HIST_Index.html">HIST</a>
 &#187; <a class="locationlevel" href="#TopOfPage">TLimit</a>
</div>
<div class="dropshadow"><div class="withshadow"><h1><a name="TLimit:description"></a>class TLimit</h1>
<div class="classdescr">
<pre>

 <a href="./TLimit.html">TLimit</a>

 <a href="./TLimit.html#TLimit:Class" title="TClass* TLimit::Class()">Class</a> to compute 95% CL limits

 adapted from the mclimit code from Tom Junk (CLs method)
 see http://root.cern.ch/root/doc/TomJunk.pdf
 see http://cern.ch/thomasj/searchlimits/ecl.html
 see: Tom Junk,NIM A434, p. 435-443, 1999

 see also the following interesting references:
  Alex Read, <span class="string">"Presentation of search results: the CLs technique"</span>
  Journal of Physics G: Nucl. Part. Phys. 28 2693-2704 (2002).
  http://www.iop.org/EJ/abstract/0954-3899/28/10/313

 A nice article is also available in the CERN yellow report with the proceeding
 of the 2000 CERN workshop on confidence intervals.

  Alex Read, <span class="string">"Modified Frequentist Analysis of Search Results (The CLs Method)"</span>
  CERN 2000-005 (30 May 2000)

 see note about: <span class="string">"Should I use TRolke, TFeldmanCousins, TLimit?"</span>
  in the <a href="./TRolke.html">TRolke</a> class description.


</pre></div>
</div></div>

<div id="functions">
<h2><a id="TLimit:Function_Members"></a>Function Members (Methods)</h2>
<div class="access" id="funcpubl"><b>public:</b>
<table class="func" id="tabfuncpubl" cellspacing="0">
<tr class="func"><td class="funcret"></td><td class="funcname"><a class="funcname" href="#TLimit:TLimit">TLimit</a>()</td></tr>
<tr class="func"><td class="funcret"></td><td class="funcname"><a class="funcname" href="#TLimit:TLimit%1">TLimit</a>(<span class="keyword">const</span> <a href="./TLimit.html">TLimit</a>&amp;)</td></tr>
<tr class="func"><td class="funcret"> virtual</td><td class="funcname"><a class="funcname" href="#TLimit:_TLimit">~TLimit</a>()</td></tr>
<tr class="func"><td class="funcret">static <a href="./TClass.html">TClass</a>*</td><td class="funcname"><a class="funcname" href="#TLimit:Class">Class</a>()</td></tr>
<tr class="func"><td class="funcret">static <a href="./TConfidenceLevel.html">TConfidenceLevel</a>*</td><td class="funcname"><a class="funcname" href="#TLimit:ComputeLimit">ComputeLimit</a>(<a href="./TLimitDataSource.html">TLimitDataSource</a>* data, <a href="./ListOfTypes.html#Int_t">Int_t</a> nmc = 50000, <span class="keyword">bool</span> stat = <span class="keyword">false</span>, <a href="./TRandom.html">TRandom</a>* generator = 0)</td></tr>
<tr class="func"><td class="funcret">static <a href="./TConfidenceLevel.html">TConfidenceLevel</a>*</td><td class="funcname"><a class="funcname" href="#TLimit:ComputeLimit%1">ComputeLimit</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a> s, <a href="./ListOfTypes.html#Double_t">Double_t</a> b, <a href="./ListOfTypes.html#Int_t">Int_t</a> d, <a href="./ListOfTypes.html#Int_t">Int_t</a> nmc = 50000, <span class="keyword">bool</span> stat = <span class="keyword">false</span>, <a href="./TRandom.html">TRandom</a>* generator = 0)</td></tr>
<tr class="func"><td class="funcret">static <a href="./TConfidenceLevel.html">TConfidenceLevel</a>*</td><td class="funcname"><a class="funcname" href="#TLimit:ComputeLimit%3">ComputeLimit</a>(<a href="./TH1.html">TH1</a>* s, <a href="./TH1.html">TH1</a>* b, <a href="./TH1.html">TH1</a>* d, <a href="./ListOfTypes.html#Int_t">Int_t</a> nmc = 50000, <span class="keyword">bool</span> stat = <span class="keyword">false</span>, <a href="./TRandom.html">TRandom</a>* generator = 0)</td></tr>
<tr class="func"><td class="funcret">static <a href="./TConfidenceLevel.html">TConfidenceLevel</a>*</td><td class="funcname"><a class="funcname" href="#TLimit:ComputeLimit%2">ComputeLimit</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a> s, <a href="./ListOfTypes.html#Double_t">Double_t</a> b, <a href="./ListOfTypes.html#Int_t">Int_t</a> d, <a href="./TVectorD.html">TVectorD</a>* se, <a href="./TVectorD.html">TVectorD</a>* be, <a href="./TObjArray.html">TObjArray</a>*, <a href="./ListOfTypes.html#Int_t">Int_t</a> nmc = 50000, <span class="keyword">bool</span> stat = <span class="keyword">false</span>, <a href="./TRandom.html">TRandom</a>* generator = 0)</td></tr>
<tr class="func"><td class="funcret">static <a href="./TConfidenceLevel.html">TConfidenceLevel</a>*</td><td class="funcname"><a class="funcname" href="#TLimit:ComputeLimit%4">ComputeLimit</a>(<a href="./TH1.html">TH1</a>* s, <a href="./TH1.html">TH1</a>* b, <a href="./TH1.html">TH1</a>* d, <a href="./TVectorD.html">TVectorD</a>* se, <a href="./TVectorD.html">TVectorD</a>* be, <a href="./TObjArray.html">TObjArray</a>*, <a href="./ListOfTypes.html#Int_t">Int_t</a> nmc = 50000, <span class="keyword">bool</span> stat = <span class="keyword">false</span>, <a href="./TRandom.html">TRandom</a>* generator = 0)</td></tr>
<tr class="func"><td class="funcret">virtual <a href="./TClass.html">TClass</a>*</td><td class="funcname"><a class="funcname" href="#TLimit:IsA">IsA</a>() <span class="keyword">const</span></td></tr>
<tr class="func"><td class="funcret"><a href="./TLimit.html">TLimit</a>&amp;</td><td class="funcname"><a class="funcname" href="#TLimit:operator_">operator=</a>(<span class="keyword">const</span> <a href="./TLimit.html">TLimit</a>&amp;)</td></tr>
<tr class="func"><td class="funcret">virtual <span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#TLimit:ShowMembers">ShowMembers</a>(<a href="./TMemberInspector.html">TMemberInspector</a>&amp; insp)</td></tr>
<tr class="func"><td class="funcret">virtual <span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#TLimit:Streamer">Streamer</a>(<a href="./TBuffer.html">TBuffer</a>&amp; b)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#TLimit:StreamerNVirtual">StreamerNVirtual</a>(<a href="./TBuffer.html">TBuffer</a>&amp; b)</td></tr>

</table></div>
<div class="access" id="funcprot"><b>protected:</b>
<table class="func" id="tabfuncprot" cellspacing="0">
<tr class="func"><td class="funcret">static <span class="keyword">bool</span></td><td class="funcname"><a class="funcname" href="#TLimit:Fluctuate">Fluctuate</a>(<a href="./TLimitDataSource.html">TLimitDataSource</a>* input, <a href="./TLimitDataSource.html">TLimitDataSource</a>* output, <span class="keyword">bool</span> init, <a href="./TRandom.html">TRandom</a>*, <span class="keyword">bool</span> stat = <span class="keyword">false</span>)</td></tr>
<tr class="func"><td class="funcret">static <a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#TLimit:LogLikelihood">LogLikelihood</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a> s, <a href="./ListOfTypes.html#Double_t">Double_t</a> b, <a href="./ListOfTypes.html#Double_t">Double_t</a> b2, <a href="./ListOfTypes.html#Double_t">Double_t</a> d)</td></tr>

</table></div>
</div>

<div id="datamembers">
<h2><a name="TLimit:Data_Members"></a>Data Members</h2>
<div class="access" id="datapriv"><b>private:</b>
<table class="data" id="tabdatapriv" cellspacing="0">
<tr class="data"><td class="datatype">static <a href="./TOrdCollection.html">TOrdCollection</a>*</td><td class="dataname"><a name="TLimit:fgSystNames"></a>fgSystNames</td><td class="datadesc">Collection of systematics names</td></tr>
<tr class="data"><td class="datatype">static <a href="./TArrayD.html">TArrayD</a>*</td><td class="dataname"><a name="TLimit:fgTable"></a>fgTable</td><td class="datadesc">a log table... just to speed up calculation</td></tr>

</table></div>
</div>
<h2><a id="TLimit:Class_Charts"></a>Class Charts</h2>
<map name="MapTLimit_Lib" id="MapTLimit_Lib">
<area shape="rect" href="LibraryDependencies.html" title="All Libraries" alt="" coords="433,121,561,169"/>
</map>
<div class="tabs">
<a id="imgTLimit_Inh" class="tabsel" href="inh/TLimit_Inh.png" onclick="javascript:return SetImg('Charts','inh/TLimit_Inh.png');">Inheritance</a>
<a id="imgTLimit_InhMem" class="tab" href="inhmem/TLimit_InhMem.png" onclick="javascript:return SetImg('Charts','inhmem/TLimit_InhMem.png');">Inherited Members</a>
<a id="imgTLimit_Incl" class="tab" href="incl/TLimit_Incl.png" onclick="javascript:return SetImg('Charts','incl/TLimit_Incl.png');">Includes</a>
<a id="imgTLimit_Lib" class="tab" href="lib/TLimit_Lib.png" onclick="javascript:return SetImg('Charts','lib/TLimit_Lib.png');">Libraries</a><br/>
</div><div class="classcharts"><div class="classchartswidth"></div>
<img id="Charts" alt="Class Charts" class="classcharts" usemap="#MapTLimit_Inh" src="inh/TLimit_Inh.png"/></div>
<h2>Function documentation</h2>
<div class="funcdoc"><span class="funcname"><a href="./TConfidenceLevel.html">TConfidenceLevel</a> * <a class="funcname" name="TLimit:ComputeLimit" href="src/TLimit.cxx.html#Z1iOTD">ComputeLimit</a>(<a href="./TLimitDataSource.html">TLimitDataSource</a>* data, <a href="./ListOfTypes.html#Int_t">Int_t</a> nmc = 50000, <span class="keyword">bool</span> stat = <span class="keyword">false</span>, <a href="./TRandom.html">TRandom</a>* generator = 0)</span><br />
<div class="funccomm"><pre> class <a href="./TLimit.html">TLimit</a>

 Algorithm to compute 95% C.L. limits using the Likelihood ratio
 semi-bayesian method.
 It takes signal, background and data histograms wrapped in a
 <a href="./TLimitDataSource.html">TLimitDataSource</a> as input and runs a set of Monte Carlo experiments in
 order to compute the limits. If needed, inputs are fluctuated according
 to systematics. The output is a <a href="./TConfidenceLevel.html">TConfidenceLevel</a>.

 class <a href="./TLimitDataSource.html">TLimitDataSource</a>


 Takes the signal, background and data histograms as well as different
 systematics sources to form the <a href="./TLimit.html">TLimit</a> input.

  class <a href="./TConfidenceLevel.html">TConfidenceLevel</a>


 Final result of the <a href="./TLimit.html">TLimit</a> algorithm. It is created just after the
 time-consuming part and can be stored in a <a href="./TFile.html">TFile</a> for further processing.
 It contains light methods to return CLs, CLb and other interesting
 quantities.

 The actual algorithm...
 From an input (<a href="./TLimitDataSource.html">TLimitDataSource</a>) it produces an output <a href="./TConfidenceLevel.html">TConfidenceLevel</a>.
 For this, nmc Monte Carlo experiments are performed.
 As usual, the larger this number, the longer the compute time,
 but the better the result.

</pre><!-- TDocHtmlDirective start -->   /*
   <FONT SIZE=+0>
   <p>Supposing that there is a plotfile.root file containing 3 histograms
           (signal, background and data), you can imagine doing things like:</p>
   <p>
   <BLOCKQUOTE><PRE>
    TFile* infile=new TFile("plotfile.root","READ");
    infile->cd();
    TH1* sh=(TH1*)infile->Get("signal");
    TH1* bh=(TH1*)infile->Get("background");
    TH1* dh=(TH1*)infile->Get("data");
    TLimitDataSource* mydatasource = new TLimitDataSource(sh,bh,dh);
    TConfidenceLevel *myconfidence = TLimit::ComputeLimit(mydatasource,50000);
    cout &lt&lt "  CLs    : " &lt&lt myconfidence->CLs()  &lt&lt endl;
    cout &lt&lt "  CLsb   : " &lt&lt myconfidence->CLsb() &lt&lt endl;
    cout &lt&lt "  CLb    : " &lt&lt myconfidence->CLb()  &lt&lt endl;
    cout &lt&lt "&lt CLs &gt  : " &lt&lt myconfidence->GetExpectedCLs_b()  &lt&lt endl;
    cout &lt&lt "&lt CLsb &gt : " &lt&lt myconfidence->GetExpectedCLsb_b() &lt&lt endl;
    cout &lt&lt "&lt CLb &gt  : " &lt&lt myconfidence->GetExpectedCLb_b()  &lt&lt endl;
    delete myconfidence;
    delete mydatasource;
    infile->Close();
   </PRE></BLOCKQUOTE></p>
   <p></p>
   <p>More informations can still be found on
   <a HREF="http://cern.ch/aleph-proj-alphapp/doc/tlimit.html">this</a> page.</p>
   </FONT>
   */
<!-- TDocHtmlDirective end --><pre>
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">bool</span> <a class="funcname" name="TLimit:Fluctuate" href="src/TLimit.cxx.html#bq_RbC">Fluctuate</a>(<a href="./TLimitDataSource.html">TLimitDataSource</a>* input, <a href="./TLimitDataSource.html">TLimitDataSource</a>* output, <span class="keyword">bool</span> init, <a href="./TRandom.html">TRandom</a>* , <span class="keyword">bool</span> stat = <span class="keyword">false</span>)</span><br />
<div class="funccomm"><pre> initialisation: create a sorted list of all the names of systematics
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./TConfidenceLevel.html">TConfidenceLevel</a> * <a class="funcname" name="TLimit:ComputeLimit%3" href="src/TLimit.cxx.html#ELyOXD">ComputeLimit</a>(<a href="./TH1.html">TH1</a>* s, <a href="./TH1.html">TH1</a>* b, <a href="./TH1.html">TH1</a>* d, <a href="./ListOfTypes.html#Int_t">Int_t</a> nmc = 50000, <span class="keyword">bool</span> stat = <span class="keyword">false</span>, <a href="./TRandom.html">TRandom</a>* generator = 0)</span><br />
<div class="funccomm"><pre> Compute limit.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./TConfidenceLevel.html">TConfidenceLevel</a> * <a class="funcname" name="TLimit:ComputeLimit%4" href="src/TLimit.cxx.html#ELyOXD">ComputeLimit</a>(<a href="./TH1.html">TH1</a>* s, <a href="./TH1.html">TH1</a>* b, <a href="./TH1.html">TH1</a>* d, <a href="./TVectorD.html">TVectorD</a>* se, <a href="./TVectorD.html">TVectorD</a>* be, <a href="./TObjArray.html">TObjArray</a>* , <a href="./ListOfTypes.html#Int_t">Int_t</a> nmc = 50000, <span class="keyword">bool</span> stat = <span class="keyword">false</span>, <a href="./TRandom.html">TRandom</a>* generator = 0)</span><br />
<div class="funccomm"><pre> Compute limit.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./TConfidenceLevel.html">TConfidenceLevel</a> * <a class="funcname" name="TLimit:ComputeLimit%1" href="src/TLimit.cxx.html#T0JaPB">ComputeLimit</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a> s, <a href="./ListOfTypes.html#Double_t">Double_t</a> b, <a href="./ListOfTypes.html#Int_t">Int_t</a> d, <a href="./ListOfTypes.html#Int_t">Int_t</a> nmc = 50000, <span class="keyword">bool</span> stat = <span class="keyword">false</span>, <a href="./TRandom.html">TRandom</a>* generator = 0)</span><br />
<div class="funccomm"><pre> Compute limit.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./TConfidenceLevel.html">TConfidenceLevel</a> * <a class="funcname" name="TLimit:ComputeLimit%2" href="src/TLimit.cxx.html#T0JaPB">ComputeLimit</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a> s, <a href="./ListOfTypes.html#Double_t">Double_t</a> b, <a href="./ListOfTypes.html#Int_t">Int_t</a> d, <a href="./TVectorD.html">TVectorD</a>* se, <a href="./TVectorD.html">TVectorD</a>* be, <a href="./TObjArray.html">TObjArray</a>* , <a href="./ListOfTypes.html#Int_t">Int_t</a> nmc = 50000, <span class="keyword">bool</span> stat = <span class="keyword">false</span>, <a href="./TRandom.html">TRandom</a>* generator = 0)</span><br />
<div class="funccomm"><pre> Compute limit.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="TLimit:LogLikelihood" href="src/TLimit.cxx.html#wss0DB">LogLikelihood</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a> s, <a href="./ListOfTypes.html#Double_t">Double_t</a> b, <a href="./ListOfTypes.html#Double_t">Double_t</a> b2, <a href="./ListOfTypes.html#Double_t">Double_t</a> d)</span><br />
<div class="funccomm"><pre> Compute <a href="./TLimit.html#TLimit:LogLikelihood" title="Double_t TLimit::LogLikelihood(Double_t s,Double_t b,Double_t b2,Double_t d)">LogLikelihood</a> (static function)
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"> <a class="funcname" name="TLimit:TLimit" href="src/TLimit.h.html#BngqdC">TLimit</a>()</span><br />

<div class="code"><code class="inlinecode">{}</code></div>
<div style="clear:both;"></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">virtual</span> <a class="funcname" name="TLimit:_TLimit" href="src/TLimit.h.html#heR58D">~TLimit</a>()</span><br />

<div class="code"><code class="inlinecode">{}</code></div>
<div style="clear:both;"></div>
</div>

<br />
<!--SIGNATURE-->
<div id="footer">

<em>&raquo; Last changed: root/hist:$Id: TLimit.h 20882 2007-11-19 11:31:26Z rdm $ </em><em>&raquo; Last generated: 2011-11-03 20:19</em><br />
<em>This page has been automatically generated. For comments or suggestions regarding the documentation or ROOT in general please send a mail to <a href="mailto:rootdev@root.cern.ch">ROOT support</a>.</em>
</div>
</div>
</body>
</html>
