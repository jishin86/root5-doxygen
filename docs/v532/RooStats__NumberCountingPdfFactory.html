<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!--                                             -->
<!-- Author: ROOT team (rootdev@pcroot.cern.ch)  -->
<!--                                             -->
<!--   Date: Thu Nov  3 20:09:41 2011            -->
<!--                                             -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>RooStats::NumberCountingPdfFactory</title>
<meta name="rating" content="General" />
<meta name="objecttype" content="Manual" />
<meta name="keywords" content="software development, oo, object oriented, unix, x11, windows, c++, html, rene brun, fons rademakers, cern" />
<meta name="description" content="ROOT - An Object Oriented Framework For Large Scale Data Analysis." />
<link rel="stylesheet" type="text/css" href="ROOT.css" id="ROOTstyle" />
<script type="text/javascript" src="ROOT.js"></script>
</head>
<body  onload="javascript:SetValuesFromCookie();"><div id="body_content">
<div id="root_header"><img src="http://root.cern.ch/drupal/sites/default/files/rootdrawing-logo.png" alt="ROOT logo"/></div>
<a name="TopOfPage"></a>
<script type="text/javascript">WriteFollowPageBox('class RooStats::NumberCountingPdfFactory','libRooStats','RooStats/NumberCountingPdfFactory.h');</script>
<div id="toplinks">
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Quick Links:</span>
<a class="descrheadentry" href="http://root.cern.ch">ROOT Homepage</a>
<a class="descrheadentry" href="./ClassIndex.html">Class Index</a>
<a class="descrheadentry" href="./ClassHierarchy.html">Class Hierarchy</a></div>
<script type="text/javascript">
function onSearch() {
var s='http://www.google.com/search?q=%s+site%3A%u+-site%3A%u%2Fsrc%2F+-site%3A%u%2Fexamples%2F';
var ref=String(document.location.href).replace(/https?:\/\//,'').replace(/\/[^\/]*$/,'').replace(/\//g,'%2F');
window.location.href=s.replace(/%u/ig,ref).replace(/%s/ig,escape(document.searchform.t.value));
return false;}
</script>
<form id="searchform" name="searchform" onsubmit="return onSearch()" action="javascript:onSearch();" method="post">
<input name="t" size="30" value="Search documentation..." onfocus="if (document.searchform.t.value=='Search documentation...') document.searchform.t.value='';"></input>
<a id="searchlink"  title="www.google.com"  href="javascript:onSearch();" onclick="return onSearch()">Search</a></form>
</div>
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Source:</span>
<a class="descrheadentry" href="src/RooStats__NumberCountingPdfFactory.h.html">header file</a>
<a class="descrheadentry" href="src/RooStats__NumberCountingPdfFactory.cxx.html">source file</a>
<a class="descrheadentry" href="http://root.cern.ch/viewcvs/trunk/roofit/roostats/inc/RooStats/NumberCountingPdfFactory.h?view=log">viewVC header</a> <a class="descrheadentry" href="http://root.cern.ch/viewcvs/trunk/roofit/roostats/src/NumberCountingPdfFactory.cxx?view=log">viewVC source</a> 
</div></div>
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Sections:</span>
<a class="descrheadentry" href="#RooStats__NumberCountingPdfFactory:description">class description</a> 
<a class="descrheadentry" href="#RooStats__NumberCountingPdfFactory:Function_Members">function members</a>
<a class="descrheadentry" href="#RooStats__NumberCountingPdfFactory:Data_Members">data members</a>
<a class="descrheadentry" href="#RooStats__NumberCountingPdfFactory:Class_Charts">class charts</a>
</div></div>
</div>
<div class="location">
<a class="locationlevel" href="index.html">ROOT</a>
 &#187; <a class="locationlevel" href="./ROOFIT_Index.html">ROOFIT</a>
 &#187; <a class="locationlevel" href="./ROOFIT_ROOSTATS_Index.html">ROOSTATS</a>
 &#187; <a class="locationlevel" href="#TopOfPage">RooStats::NumberCountingPdfFactory</a>
</div>
<div class="dropshadow"><div class="withshadow"><h1><a name="RooStats__NumberCountingPdfFactory:description"></a>class RooStats::NumberCountingPdfFactory</h1>
<div class="classdescr">
<pre>

</pre><!-- TDocHtmlDirective start --><p>
A factory for building PDFs and data for a number counting combination.  
The factory produces a PDF for N channels with uncorrelated background 
uncertainty.  Correlations can be added by extending this PDF with additional terms.
The factory relates the signal in each channel to a master signal strength times the 
expected signal in each channel.  Thus, the final test is performed on the master signal strength.
This yields a more powerful test than letting signal in each channel be independent.
</p>
<p>
The problem has been studied in these references:
<ul>
 <li>   http://arxiv.org/abs/physics/0511028</li>
 <li>   http://arxiv.org/abs/physics/0702156</li>
 <li>   http://cdsweb.cern.ch/record/1099969?ln=en</li>
</ul>
</p>
<p>
One can incorporate uncertainty on the expected signal by adding additional terms.
For the future, perhaps this factory should be extended to include the efficiency terms automatically.
</p>
<!-- TDocHtmlDirective end --><pre>

</pre></div>
</div></div>

<div id="functions">
<h2><a id="RooStats__NumberCountingPdfFactory:Function_Members"></a>Function Members (Methods)</h2>
<div class="access" id="funcpubl"><b>public:</b>
<table class="func" id="tabfuncpubl" cellspacing="0">
<tr class="func"><td class="funcret"> virtual</td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:_NumberCountingPdfFactory">~NumberCountingPdfFactory</a>()</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:AddData">AddData</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a>* mainMeas, <a href="./ListOfTypes.html#Double_t">Double_t</a>* bkgMeas, <a href="./ListOfTypes.html#Double_t">Double_t</a>* db, <a href="./ListOfTypes.html#Int_t">Int_t</a> nbins, <a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* dsName = <span class="string">"NumberCountingData"</span>)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:AddDataWithSideband">AddDataWithSideband</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a>* mainMeas, <a href="./ListOfTypes.html#Double_t">Double_t</a>* sideband, <a href="./ListOfTypes.html#Double_t">Double_t</a>* tau, <a href="./ListOfTypes.html#Int_t">Int_t</a> nbins, <a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* dsName = <span class="string">"ExpectedNumberCountingData"</span>)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:AddExpData">AddExpData</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a>* sigExp, <a href="./ListOfTypes.html#Double_t">Double_t</a>* bkgExp, <a href="./ListOfTypes.html#Double_t">Double_t</a>* db, <a href="./ListOfTypes.html#Int_t">Int_t</a> nbins, <a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* dsName = <span class="string">"ExpectedNumberCountingData"</span>)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:AddExpDataWithSideband">AddExpDataWithSideband</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a>* sigExp, <a href="./ListOfTypes.html#Double_t">Double_t</a>* bkgExp, <a href="./ListOfTypes.html#Double_t">Double_t</a>* tau, <a href="./ListOfTypes.html#Int_t">Int_t</a> nbins, <a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* dsName = <span class="string">"NumberCountingData"</span>)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:AddModel">AddModel</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a>* sigExp, <a href="./ListOfTypes.html#Int_t">Int_t</a> nchan, <a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* pdfName = <span class="string">"CombinedPdf"</span>, <span class="keyword">const</span> <span class="keyword">char</span>* masterSignalName = <span class="string">"masterSignal"</span>)</td></tr>
<tr class="func"><td class="funcret">static <a href="./TClass.html">TClass</a>*</td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:Class">Class</a>()</td></tr>
<tr class="func"><td class="funcret">virtual <a href="./TClass.html">TClass</a>*</td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:IsA">IsA</a>() <span class="keyword">const</span></td></tr>
<tr class="func"><td class="funcret"><a href="./RooStats.html">RooStats</a>::<a href="./RooStats__NumberCountingPdfFactory.html">NumberCountingPdfFactory</a></td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:NumberCountingPdfFactory">NumberCountingPdfFactory</a>()</td></tr>
<tr class="func"><td class="funcret"><a href="./RooStats.html">RooStats</a>::<a href="./RooStats__NumberCountingPdfFactory.html">NumberCountingPdfFactory</a></td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:NumberCountingPdfFactory%1">NumberCountingPdfFactory</a>(<span class="keyword">const</span> <a href="./RooStats.html">RooStats</a>::<a href="./RooStats__NumberCountingPdfFactory.html">NumberCountingPdfFactory</a>&amp;)</td></tr>
<tr class="func"><td class="funcret"><a href="./RooStats.html">RooStats</a>::<a href="./RooStats__NumberCountingPdfFactory.html">NumberCountingPdfFactory</a>&amp;</td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:operator_">operator=</a>(<span class="keyword">const</span> <a href="./RooStats.html">RooStats</a>::<a href="./RooStats__NumberCountingPdfFactory.html">NumberCountingPdfFactory</a>&amp;)</td></tr>
<tr class="func"><td class="funcret">virtual <span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:ShowMembers">ShowMembers</a>(<a href="./TMemberInspector.html">TMemberInspector</a>&amp; insp)</td></tr>
<tr class="func"><td class="funcret">virtual <span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:Streamer">Streamer</a>(<a href="./TBuffer.html">TBuffer</a>&amp; b)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:StreamerNVirtual">StreamerNVirtual</a>(<a href="./TBuffer.html">TBuffer</a>&amp; b)</td></tr>

</table></div>
<div class="access" id="funcpriv"><b>private:</b>
<table class="func" id="tabfuncpriv" cellspacing="0">
<tr class="func"><td class="funcret"><a href="./RooRealVar.html">RooRealVar</a>*</td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:SafeObservableCreation">SafeObservableCreation</a>(<a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* varName, <a href="./ListOfTypes.html#Double_t">Double_t</a> value)</td></tr>
<tr class="func"><td class="funcret"><a href="./RooRealVar.html">RooRealVar</a>*</td><td class="funcname"><a class="funcname" href="#RooStats__NumberCountingPdfFactory:SafeObservableCreation%1">SafeObservableCreation</a>(<a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* varName, <a href="./ListOfTypes.html#Double_t">Double_t</a> value, <a href="./ListOfTypes.html#Double_t">Double_t</a> maximum)</td></tr>

</table></div>
</div>
<h2><a id="RooStats__NumberCountingPdfFactory:Class_Charts"></a>Class Charts</h2>
<map name="MapRooStats__NumberCountingPdfFactory_Lib" id="MapRooStats__NumberCountingPdfFactory_Lib">
<area shape="rect" href="LibraryDependencies.html" title="All Libraries" alt="" coords="371,367,463,401"/>
</map>
<div class="tabs">
<a id="imgRooStats__NumberCountingPdfFactory_Inh" class="tabsel" href="inh/RooStats__NumberCountingPdfFactory_Inh.png" onclick="javascript:return SetImg('Charts','inh/RooStats__NumberCountingPdfFactory_Inh.png');">Inheritance</a>
<a id="imgRooStats__NumberCountingPdfFactory_InhMem" class="tab" href="inhmem/RooStats__NumberCountingPdfFactory_InhMem.png" onclick="javascript:return SetImg('Charts','inhmem/RooStats__NumberCountingPdfFactory_InhMem.png');">Inherited Members</a>
<a id="imgRooStats__NumberCountingPdfFactory_Incl" class="tab" href="incl/RooStats__NumberCountingPdfFactory_Incl.png" onclick="javascript:return SetImg('Charts','incl/RooStats__NumberCountingPdfFactory_Incl.png');">Includes</a>
<a id="imgRooStats__NumberCountingPdfFactory_Lib" class="tab" href="lib/RooStats__NumberCountingPdfFactory_Lib.png" onclick="javascript:return SetImg('Charts','lib/RooStats__NumberCountingPdfFactory_Lib.png');">Libraries</a><br/>
</div><div class="classcharts"><div class="classchartswidth"></div>
<img id="Charts" alt="Class Charts" class="classcharts" usemap="#MapRooStats__NumberCountingPdfFactory_Inh" src="inh/RooStats__NumberCountingPdfFactory_Inh.png"/></div>
<h2>Function documentation</h2>
<div class="funcdoc"><span class="funcname"> <a class="funcname" name="RooStats__NumberCountingPdfFactory:NumberCountingPdfFactory" href="src/RooStats__NumberCountingPdfFactory.cxx.html#ZgYbgB">NumberCountingPdfFactory</a>()</span><br />
<div class="funccomm"><pre> constructor
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"> <a class="funcname" name="RooStats__NumberCountingPdfFactory:_NumberCountingPdfFactory" href="src/RooStats__NumberCountingPdfFactory.cxx.html#SSsrfB">~NumberCountingPdfFactory</a>()</span><br />
<div class="funccomm"><pre> destructor
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="RooStats__NumberCountingPdfFactory:AddModel" href="src/RooStats__NumberCountingPdfFactory.cxx.html#RuNbjD">AddModel</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a>* sigExp, <a href="./ListOfTypes.html#Int_t">Int_t</a> nchan, <a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* pdfName = <span class="string">"CombinedPdf"</span>, <span class="keyword">const</span> <span class="keyword">char</span>* masterSignalName = <span class="string">"masterSignal"</span>)</span><br />
<div class="funccomm"><pre> This method produces a PDF for N channels with uncorrelated background
 uncertainty. It relates the signal in each channel to a master signal strength times the
 expected signal in each channel.

 For the future, perhaps this method should be extended to include the efficiency terms automatically.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="RooStats__NumberCountingPdfFactory:AddExpData" href="src/RooStats__NumberCountingPdfFactory.cxx.html#RAPAuD">AddExpData</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a>* sigExp, <a href="./ListOfTypes.html#Double_t">Double_t</a>* bkgExp, <a href="./ListOfTypes.html#Double_t">Double_t</a>* db, <a href="./ListOfTypes.html#Int_t">Int_t</a> nbins, <a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* dsName = <span class="string">"ExpectedNumberCountingData"</span>)</span><br />
<div class="funccomm"><pre> Arguements are an array of expected signal, expected background, and relative
 background uncertainty (eg. 0.1 for 10% uncertainty), and the number of channels.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="RooStats__NumberCountingPdfFactory:AddExpDataWithSideband" href="src/RooStats__NumberCountingPdfFactory.cxx.html#IeQ7G">AddExpDataWithSideband</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a>* sigExp, <a href="./ListOfTypes.html#Double_t">Double_t</a>* bkgExp, <a href="./ListOfTypes.html#Double_t">Double_t</a>* tau, <a href="./ListOfTypes.html#Int_t">Int_t</a> nbins, <a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* dsName = <span class="string">"NumberCountingData"</span>)</span><br />
<div class="funccomm"><pre> Arguements are an array of expected signal, expected background, and relative
 ratio of background expected in the sideband to that expected in signal region, and the number of channels.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./RooRealVar.html">RooRealVar</a>* <a class="funcname" name="RooStats__NumberCountingPdfFactory:SafeObservableCreation" href="src/RooStats__NumberCountingPdfFactory.cxx.html#yHWD2">SafeObservableCreation</a>(<a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* varName, <a href="./ListOfTypes.html#Double_t">Double_t</a> value)</span><br />
<div class="funccomm"><pre> need to be careful here that the range of observable in the dataset is consistent with the one in the workspace
 don't rescale unless necessary.  If it is necessary, then rescale by x10 or a defined maximum.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./RooRealVar.html">RooRealVar</a>* <a class="funcname" name="RooStats__NumberCountingPdfFactory:SafeObservableCreation%1" href="src/RooStats__NumberCountingPdfFactory.cxx.html#Bh2kc">SafeObservableCreation</a>(<a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* varName, <a href="./ListOfTypes.html#Double_t">Double_t</a> value, <a href="./ListOfTypes.html#Double_t">Double_t</a> maximum)</span><br />
<div class="funccomm"><pre> need to be careful here that the range of observable in the dataset is consistent with the one in the workspace
 don't rescale unless necessary.  If it is necessary, then rescale by x10 or a defined maximum.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="RooStats__NumberCountingPdfFactory:AddData" href="src/RooStats__NumberCountingPdfFactory.cxx.html#fj1s2B">AddData</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a>* mainMeas, <a href="./ListOfTypes.html#Double_t">Double_t</a>* bkgMeas, <a href="./ListOfTypes.html#Double_t">Double_t</a>* db, <a href="./ListOfTypes.html#Int_t">Int_t</a> nbins, <a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* dsName = <span class="string">"NumberCountingData"</span>)</span><br />
<div class="funccomm"><pre> Arguments are an array of results from a main measurement, a measured background,
  and relative background uncertainty (eg. 0.1 for 10% uncertainty), and the number of channels.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="RooStats__NumberCountingPdfFactory:AddDataWithSideband" href="src/RooStats__NumberCountingPdfFactory.cxx.html#CkzPrC">AddDataWithSideband</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a>* mainMeas, <a href="./ListOfTypes.html#Double_t">Double_t</a>* sideband, <a href="./ListOfTypes.html#Double_t">Double_t</a>* tau, <a href="./ListOfTypes.html#Int_t">Int_t</a> nbins, <a href="./RooWorkspace.html">RooWorkspace</a>* ws, <span class="keyword">const</span> <span class="keyword">char</span>* dsName = <span class="string">"ExpectedNumberCountingData"</span>)</span><br />
<div class="funccomm"><pre> Arguements are an array of expected signal, expected background, and relative
 background uncertainty (eg. 0.1 for 10% uncertainty), and the number of channels.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"> <a class="funcname" name="RooStats__NumberCountingPdfFactory:NumberCountingPdfFactory" href="src/RooStats__NumberCountingPdfFactory.h.html#kZHb4">NumberCountingPdfFactory</a>()</span><br />
<div class="funccomm"><pre> need one for expected and one for observed
</pre></div>
</div>

<br />
<!--SIGNATURE-->
<div id="footer">
<em>&raquo; Author: <a href="http://consult.cern.ch/xwho/people?Kyle+Cranmer"> Kyle Cranmer   28/07/2008</a> </em><em>&raquo; Copyright   (C) 1995-2008, Rene Brun and Fons Rademakers.               *</em><br />
<em>&raquo; Last changed: root/roostats:$Id: NumberCountingPdfFactory.h 39391 2011-05-26 09:51:59Z moneta $ </em><em>&raquo; Last generated: 2011-11-03 20:09</em><br />
<em>This page has been automatically generated. For comments or suggestions regarding the documentation or ROOT in general please send a mail to <a href="mailto:rootdev@root.cern.ch">ROOT support</a>.</em>
</div>
</div>
</body>
</html>
